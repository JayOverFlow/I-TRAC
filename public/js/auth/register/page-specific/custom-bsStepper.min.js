document.addEventListener('DOMContentLoaded', function () {

    /**
     * 
     *  Validation Horizontal  
     * 
     */

    var formValidation = document.querySelector('.stepper-form-validation-one');
    
    // Only initialize if the element exists
    if (formValidation) {
        var stepper = new Stepper(formValidation, {
            animation: true
        })
        var formValidationNextButton = formValidation.querySelectorAll('.btn-nxt');
        var formValidationBackButton = formValidation.querySelectorAll('.btn-back');
        var formValidationSubmit = formValidation.querySelector('.btn-submit');
        var stepperPanList = [].slice.call(formValidation.querySelectorAll('.content'))
        
        // Fix the selectors to match your HTML
        var inputName = formValidation.querySelector('#validationStepform-first-name');

        var formEl = formValidation.querySelector('.bs-stepper-content form')

        formValidationNextButton.forEach(element => {
            element.addEventListener('click', function() {
                stepper.next();
            })
        });

        formValidationBackButton.forEach(element => {
            element.addEventListener('click', function() {
                stepper.previous();
            })
        });

        formValidation.addEventListener('show.bs-stepper', function (event) {
            formEl.classList.remove('was-validated')
            var nextStep = event.detail.indexStep
            var currentStep = nextStep
    
            if (currentStep > 0) {
              currentStep--
            }
            
            var stepperPan = stepperPanList[currentStep]


            // Valdiations
            if (
                (stepperPan && stepperPan.getAttribute('id') === 'validationStep-one' && !inputName.value.length)
            ) {
                event.preventDefault()
                formEl.classList.add('was-validated')
            } else {
                if (event.detail.from < event.detail.to) {
                    formValidation.querySelectorAll('.step')[event.detail.from].classList.add('crossed');
                } else {
                    formValidation.querySelectorAll('.step')[event.detail.to].classList.remove('crossed');
                }
            }
        })

        formValidationSubmit.addEventListener('click', function() {
            formEl.classList.remove('was-validated')

            if (
                (!inputAddress.value.length)
                ||
                (!inputCity.value.length)
                ||
                (!inputState.value.length)
                ||
                (!inputZip.value.length)
                ||
                (!gridCheck.checked)
            ) {
                formEl.classList.add('was-validated')
            }
        })
    }

})